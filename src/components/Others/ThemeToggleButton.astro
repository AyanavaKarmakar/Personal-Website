<button
  class="m-auto group flex gap-3 rounded-lg border-0 bg-blue-50/75 p-2 hover:bg-slate-200 dark:border-indigo-200/20 border-slate-900 dark:bg-indigo-200/10 dark:hover:border-indigo-200/50 dark:hover:bg-slate-700"
  name="theme-toggle"
>
  <label
    class="cursor-pointer group-hover:animate-spin text-slate-900 dark:text-slate-50"
  >
    <!-- Sun -->
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-6 w-6 fill-current stroke-current stroke-2 transition-colors duration-300"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"
      ></path>
    </svg>
  </label>
</button>

<script>
  // Ref: https://github.com/t3-oss/create-t3-app/blob/next/www/src/components/navigation/themeToggleButton.astro
  const html = document.documentElement;
  const themeToggle = document.querySelector('[name="theme-toggle"]');
  const getMessage = () => {
    const theme = html.classList.contains("dark") ? "light" : "dark";
    return `Use ${theme}-mode`;
  };
  themeToggle!.setAttribute("title", getMessage());
  themeToggle!.setAttribute("aria-label", getMessage());
  themeToggle!.setAttribute(
    "value",
    html.classList.contains("dark") ? "dark" : "light",
  );
  const toggleTheme = (t: "light" | "dark") => {
    localStorage.setItem("theme", t);
    html.classList.add(t === "dark" ? "dark" : "light");
    html.classList.remove(t === "dark" ? "light" : "dark");
    themeToggle!.setAttribute("title", getMessage());
    themeToggle!.setAttribute("aria-label", getMessage());
    themeToggle!.setAttribute("value", t);
  };
  themeToggle!.addEventListener("click", () => {
    toggleTheme(html.classList.contains("dark") ? "light" : "dark");
  });
</script>
